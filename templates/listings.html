{% extends "base.html" %}

{% block content %}

<div class="flex items-center justify-between mb-6">
    <h1 class="text-3xl font-bold">Listings</h1>
    <a href="/add-listing/"
       class="inline-flex items-center px-5 py-2.5 rounded-lg
              bg-blue-600 text-white font-medium hover:bg-blue-700 transition">
        + New Listing
    </a>
</div>

<div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
    {% for listing in listings %}
    <div class="bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition">

        <!-- IMAGE -->
        {% if listing.image %}
        <img src="{{ listing.image.url }}" alt="{{ listing.title }}" class="w-full h-48 object-cover">
        {% else %}
        <div class="w-full h-48 bg-gray-100 flex items-center justify-center text-gray-400 text-sm">
            No image available
        </div>
        {% endif %}

        <!-- CONTENT -->
        <div class="p-5">
            <h3 class="text-xl font-semibold mb-2">{{ listing.title }}</h3>

<!-- AVG RATING -->
<div class="flex items-center mb-2">
    {% if listing.avg_rating %}
        {% for i in stars %}
            {% if i <= listing.avg_rating %}
                <span class="text-yellow-400">★</span>
            {% else %}
                <span class="text-gray-300">★</span>
            {% endif %}
        {% endfor %}
        <span class="ml-2 text-gray-600">({{ listing.avg_rating|floatformat:1 }})</span>
    {% else %}
        <span class="text-gray-400">No ratings yet</span>
    {% endif %}
</div>


            <a href="/listings/{{ listing.id }}/"
               class="text-blue-600 hover:text-blue-800 font-medium transition">
                View details →
            </a>
        </div>
    </div>
    {% endfor %}
</div>

{% endblock %}
